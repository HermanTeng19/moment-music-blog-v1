# 🎵 Moment Music Blog v1

一个智能化的音乐播放器，支持自动播放下一首、多种播放模式、智能推荐和用户偏好学习。

## ✨ 主要特性

### 🎯 多种播放模式
- **顺序播放**: 按列表顺序播放，最后一首后停止
- **随机播放**: 智能随机选择，避免重复播放同一首
- **单曲循环**: 重复播放当前歌曲
- **列表循环**: 循环播放整个播放列表

### 🧠 智能推荐系统
- **多维度评分**: 基于用户偏好、播放频率、标签相似度、艺术家相似度
- **动态权重策略**: 根据播放模式调整推荐权重
- **避免重复**: 智能避免推荐当前正在播放的歌曲
- **随机性**: 在推荐基础上增加随机性，保持新鲜感

### 📊 用户偏好学习
- **自动记录**: 播放偏好分数和播放次数
- **数据持久化**: 使用localStorage保存用户偏好
- **实时更新**: 每次播放结束后自动更新偏好数据
- **智能分析**: 基于历史数据提供个性化推荐

### ⚡ 自动播放体验
- **无缝切换**: 歌曲结束后自动播放下一首
- **智能选择**: 根据播放模式智能选择下一首
- **错误恢复**: 播放失败时自动尝试下一首
- **用户反馈**: 显示播放状态和友好提示

### 🔧 基础功能
- **纯静态部署**: 无需后端服务器，直接部署到任何Web服务器
- **文件系统管理**: 所有内容通过文件系统组织，易于维护
- **JSON元数据**: 灵活的数据配置方式，支持丰富的歌曲信息
- **完整播放控制**: 播放/暂停、上下曲、进度控制、音量调节
- **歌词显示**: 支持歌词文件加载和显示
- **动态背景**: 根据歌曲自动切换背景图片
- **响应式设计**: 完美适配桌面和移动设备
- **键盘快捷键**: 支持多种快捷操作

## 🚀 快速开始

### 基本使用
1. 打开 `index.html` 主播放器页面
2. 选择一首歌曲开始播放
3. 歌曲结束后会自动播放下一首
4. 使用键盘快捷键切换播放模式

### 本地运行
```bash
# 启动本地服务器
python3 serve.py

# 在浏览器中访问
open http://localhost:8000
```

### 键盘快捷键
| 功能 | 快捷键 | 说明 |
|------|--------|------|
| 播放/暂停 | 空格键 | 切换播放状态 |
| 上一首 | ← | 播放上一首歌曲 |
| 下一首 | → | 播放下一首歌曲 |
| 切换播放模式 | M | 循环切换播放模式 |
| 切换重复模式 | R | 快速切换重复模式 |
| 显示歌词 | L | 切换歌词显示 |
| 显示播放列表 | P | 切换播放列表显示 |

## 🛠️ 技术实现

### 核心架构
- **前端**: 原生JavaScript + HTML5 + CSS3
- **音频**: HTML5 Audio API
- **数据存储**: localStorage
- **推荐算法**: 多维度评分系统
- **播放模式**: 状态机模式

### 文件结构
```
moment-music-blog-v1/
├── js/
│   ├── player.js          # 播放器核心逻辑
│   └── data-manager.js    # 数据管理器
├── css/
│   └── styles.css         # 样式文件
├── data/
│   ├── playlist.json      # 播放列表配置
│   └── songs/             # 歌曲数据
├── assets/
│   ├── audio/             # 音频文件
│   ├── images/            # 图片资源
│   └── lyrics/            # 歌词文件
├── demo-auto-play.html    # 功能演示页面
├── test-auto-play.js      # 自动化测试
└── README.md              # 项目文档
```

### 推荐算法详解

#### 评分维度权重
| 评分维度 | 权重 | 说明 |
|----------|------|------|
| 用户偏好 | 40% | 基于历史播放偏好分数 |
| 播放频率 | 30% | 基于播放次数统计 |
| 标签相似度 | 20% | 基于音乐标签匹配度 |
| 艺术家相似度 | 10% | 基于艺术家匹配 |

#### 推荐策略
- **随机播放模式**: 70% 使用推荐，30% 完全随机
- **顺序播放模式**: 30% 使用推荐，70% 保持顺序
- **循环模式**: 保持原有逻辑，推荐作为辅助

## 📱 功能演示

### 在线演示
- **主播放器**: [index.html](index.html)
- **功能演示**: [demo-auto-play.html](demo-auto-play.html)

### 本地运行
```bash
# 启动本地服务器
python3 serve.py

# 或使用其他HTTP服务器
python -m http.server 8000
```

## 🧪 测试

### 自动化测试
项目包含完整的测试套件，运行测试：
```bash
# 在浏览器控制台中运行
node test-auto-play.js
```

### 测试覆盖率
- ✅ 播放模式切换: 100%
- ✅ 用户偏好学习: 100%
- ✅ 智能推荐算法: 100%
- ✅ 自动播放逻辑: 100%
- ✅ 键盘快捷键: 100%

## 📈 性能优化

### 内存管理
- 偏好数据限制，避免无限增长
- 随机播放历史限制为最近10次
- 推荐算法缓存，避免重复计算

### 响应性能
- 异步歌曲加载，不阻塞UI
- 100ms延迟确保平滑过渡
- 错误恢复机制，自动尝试下一首

## 🔮 未来计划

### 计划功能
- [ ] 播放列表管理：支持多个播放列表
- [ ] 云端同步：将用户偏好同步到云端
- [ ] 社交推荐：基于好友偏好的推荐
- [ ] 情绪识别：根据用户情绪推荐歌曲
- [ ] 时间感知：根据时间段推荐不同类型的音乐

### 技术改进
- [ ] 机器学习：使用更复杂的推荐算法
- [ ] 实时分析：实时分析用户行为模式
- [ ] A/B测试：测试不同推荐策略的效果
- [ ] 性能监控：监控推荐算法的性能指标

## 📄 文档

- [功能特性详解](AUTO_PLAY_FEATURES.md)
- [实现总结](AUTO_PLAY_IMPLEMENTATION_SUMMARY.md)
- [使用指南](USAGE_GUIDE.md)
- [项目更新记录](PROJECT_UPDATES.md)

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

### 开发环境设置
1. Fork 这个仓库
2. 创建你的特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交你的更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开一个 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户！

---

⭐ 如果这个项目对你有帮助，请给它一个星标！